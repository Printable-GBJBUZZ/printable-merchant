"use client";
import { useUser } from "@clerk/nextjs";
import { log } from "console";
import Image from "next/image";

import React, { useEffect, useState } from "react";

const Header = () => {
  const [currentTime, setCurrentTime] = useState<Date>(new Date());

  const { user } = useUser();

  // console.log(`checking user`, user);

  useEffect(() => {
    const IntervalId = setInterval(() => {
      setCurrentTime(new Date());
    }, 1000);

    return () => clearInterval(IntervalId);
  }, []);

  const formatDate = (date: Date): string => {
    const options: Intl.DateTimeFormatOptions = {
      day: "2-digit",
      month: "short",
      year: "numeric",
    };
    return date.toLocaleDateString("en-GB", options);
  };

  const formatTime = (date: Date): string => {
    return date.toLocaleTimeString("en-US", {
      hour: "2-digit",
      minute: "2-digit",
      hour12: true,
    });
  };

  return (
    <div className="flex justify-between items-center bg-white rounded-2xl px-4 h-16">
      <div className="w-60">
        <input
          type="text"
          placeholder="Search orders, customers"
          className="bg-[#E6E6ED] rounded-3xl px-4 py-2 w-full"
        />
      </div>
      <div className="flex items-center">
        <div className="flex gap-6 items-center">
          <p className="flex gap-3 items-center">
            <span>{formatDate(currentTime)}</span>
            <span>{formatTime(currentTime)}</span>
          </p>
          <div className="flex gap-4 items-center">
            <div>
              <svg
                width="22"
                height="22"
                viewBox="0 0 22 22"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle
                  cx="3"
                  cy="3"
                  r="3"
                  transform="matrix(-1 0 0 1 13.5 8)"
                  stroke="black"
                  strokeWidth="1.5"
                />
                <path
                  d="M10.5001 1L10.5001 0.25H10.5001V1ZM15.0001 3.9375L14.6251 4.58702L14.6252 4.58705L15.0001 3.9375ZM15.0001 18.0625L14.6251 17.413L14.6251 17.413L15.0001 18.0625ZM10.5001 21V21.75H10.5001L10.5001 21ZM6.00011 18.0625L6.37521 17.413L6.37511 17.413L6.00011 18.0625ZM6.00011 3.9375L6.37511 4.58702L6.37518 4.58698L6.00011 3.9375ZM1.40733 8.68646L1.88438 8.10774L1.40733 8.68646ZM3.81598 17.7418L3.64403 17.0118L3.81598 17.7418ZM2.9086 17.5048L3.47786 17.0165L2.9086 17.5048ZM8.03482 20.6935L7.85044 21.4205L8.03482 20.6935ZM7.41933 19.9838L6.68851 20.1524L7.41933 19.9838ZM13.5791 19.9838L12.8483 19.8149L13.5791 19.9838ZM12.9634 20.6935L12.779 19.9665L12.9634 20.6935ZM18.0895 17.505L17.5203 17.0167L18.0895 17.505ZM20.3758 9.43609L21.1167 9.3197L20.3758 9.43609ZM20.1603 10.1244L19.5758 9.65458L20.1603 10.1244ZM1.4072 13.3127L0.930241 12.7339L1.4072 13.3127ZM18.0906 4.49416L18.6598 4.00578L18.0906 4.49416ZM19.882 13.4606L20.536 13.0935L19.882 13.4606ZM19.9806 14.176L20.6918 14.4141L19.9806 14.176ZM13.579 2.01539L12.8482 2.18414L13.579 2.01539ZM10.5001 1L10.5001 1.75C11.2875 1.75003 12.0509 1.84818 12.7791 2.03261L12.9632 1.30557L13.1473 0.578526C12.2997 0.363828 11.4126 0.250038 10.5001 0.25L10.5001 1ZM13.579 2.01539L12.8482 2.18414C13.0734 3.1595 13.6875 4.04568 14.6251 4.58702L15.0001 3.9375L15.3751 3.28798C14.8134 2.96368 14.4455 2.43468 14.3098 1.84665L13.579 2.01539ZM15.0001 3.9375L14.6252 4.58705C15.4858 5.08386 16.4615 5.1982 17.3555 4.98729L17.1833 4.25733L17.0111 3.52736C16.4724 3.65446 15.8903 3.58534 15.375 3.28795L15.0001 3.9375ZM18.0906 4.49416L17.5214 4.98253C18.6127 6.25442 19.3633 7.82374 19.6349 9.55247L20.3758 9.43609L21.1167 9.3197C20.8007 7.30765 19.9269 5.48255 18.6598 4.00578L18.0906 4.49416ZM20.1603 10.1244L19.5758 9.65458C19.0601 10.2961 18.7501 11.1122 18.7501 12H19.5001H20.2501C20.2501 11.4672 20.435 10.9799 20.7449 10.5943L20.1603 10.1244ZM19.5001 12H18.7501C18.7501 12.664 18.9247 13.2875 19.228 13.8277L19.882 13.4606L20.536 13.0935C20.3541 12.7695 20.2501 12.3979 20.2501 12H19.5001ZM19.9806 14.176L19.2694 13.9379C18.8872 15.0795 18.2883 16.1216 17.5203 17.0167L18.0895 17.505L18.6587 17.9934C19.5504 16.9542 20.2469 15.7428 20.6918 14.4141L19.9806 14.176ZM17.1825 17.742L17.3544 17.0119C16.4604 16.8015 15.4853 16.9164 14.6251 17.413L15.0001 18.0625L15.3751 18.712C15.8903 18.4146 16.4722 18.3453 17.0106 18.472L17.1825 17.742ZM15.0001 18.0625L14.6251 17.413C13.6878 17.9542 13.0737 18.8398 12.8483 19.8149L13.5791 19.9838L14.3098 20.1527C14.4457 19.565 14.8134 19.0363 15.3751 18.712L15.0001 18.0625ZM12.9634 20.6935L12.779 19.9665C12.0505 20.1513 11.2873 20.25 10.5001 20.25L10.5001 21L10.5001 21.75C11.4132 21.75 12.3002 21.6355 13.1477 21.4205L12.9634 20.6935ZM10.5001 21V20.25C9.71225 20.25 8.94812 20.1514 8.21919 19.9665L8.03482 20.6935L7.85044 21.4205C8.69867 21.6356 9.58664 21.75 10.5001 21.75V21ZM7.41933 19.9838L8.15014 19.8153C7.92537 18.8406 7.31277 17.9545 6.37521 17.413L6.00011 18.0625L5.625 18.712C6.18599 19.036 6.55291 19.5644 6.68851 20.1524L7.41933 19.9838ZM6.00011 18.0625L6.37511 17.413C5.51461 16.9162 4.5385 16.8011 3.64403 17.0118L3.81598 17.7418L3.98793 18.4718C4.52679 18.3449 5.10959 18.4144 5.62511 18.712L6.00011 18.0625ZM2.9086 17.5048L3.47786 17.0165C2.73421 16.1496 2.14907 15.1447 1.76581 14.0452L1.05761 14.2921L0.349404 14.539C0.79545 15.8186 1.47596 16.9866 2.33935 17.9931L2.9086 17.5048ZM1.4072 13.3127L1.88416 13.8915C2.71608 13.2059 3.25011 12.166 3.25011 11H2.50011H1.75011C1.75011 11.6977 1.43234 12.3201 0.930241 12.7339L1.4072 13.3127ZM2.50011 11H3.25011C3.25011 9.83409 2.71643 8.7936 1.88438 8.10774L1.40733 8.68646L0.93028 9.26519C1.43231 9.67901 1.75011 10.302 1.75011 11H2.50011ZM1.0577 7.70676L1.76589 7.95368C2.14922 6.85426 2.73427 5.8493 3.47782 4.98253L2.90858 4.49421L2.33934 4.00588C1.47595 5.01234 0.795584 6.18048 0.349516 7.45984L1.0577 7.70676ZM3.81595 4.25738L3.64371 4.98733C4.53798 5.19834 5.5142 5.08406 6.37511 4.58702L6.00011 3.9375L5.62511 3.28798C5.10985 3.58546 4.52725 3.65462 3.98819 3.52742L3.81595 4.25738ZM6.00011 3.9375L6.37518 4.58698C7.31315 4.0453 7.9257 3.15867 8.15029 2.18371L7.41943 2.01535L6.68857 1.84699C6.55304 2.43533 6.18609 2.96401 5.62503 3.28802L6.00011 3.9375ZM8.03498 1.30557L8.21912 2.03261C8.94778 1.84807 9.71203 1.75 10.5001 1.75V1V0.25C9.58716 0.25 8.69923 0.363657 7.85085 0.578522L8.03498 1.30557ZM7.41943 2.01535L8.15029 2.18371C8.16576 2.11656 8.19205 2.06922 8.21243 2.04443C8.22991 2.02316 8.23297 2.0291 8.21912 2.03261L8.03498 1.30557L7.85085 0.578522C7.15997 0.753499 6.80301 1.35019 6.68857 1.84699L7.41943 2.01535ZM1.40733 8.68646L1.88438 8.10774C1.82371 8.05772 1.78847 8.00364 1.77434 7.96748C1.76246 7.93708 1.77121 7.93844 1.76589 7.95368L1.0577 7.70676L0.349516 7.45984C0.0841194 8.22103 0.495264 8.9066 0.93028 9.26519L1.40733 8.68646ZM3.81598 17.7418L3.64403 17.0118C3.57715 17.0275 3.52319 17.0249 3.49194 17.0176C3.46506 17.0113 3.46876 17.0059 3.47786 17.0165L2.9086 17.5048L2.33935 17.9931C2.80188 18.5323 3.49251 18.5885 3.98793 18.4718L3.81598 17.7418ZM8.03482 20.6935L8.21919 19.9665C8.23297 19.97 8.22985 19.9759 8.21233 19.9546C8.19193 19.9298 8.16563 19.8824 8.15014 19.8153L7.41933 19.9838L6.68851 20.1524C6.80305 20.649 7.15994 21.2454 7.85044 21.4205L8.03482 20.6935ZM13.5791 19.9838L12.8483 19.8149C12.8328 19.8822 12.8064 19.9296 12.786 19.9545C12.7684 19.9759 12.7652 19.97 12.779 19.9665L12.9634 20.6935L13.1477 21.4205C13.8383 21.2454 14.1951 20.649 14.3098 20.1527L13.5791 19.9838ZM18.0895 17.505L17.5203 17.0167C17.5294 17.0061 17.5331 17.0115 17.5063 17.0178C17.4751 17.025 17.4212 17.0277 17.3544 17.0119L17.1825 17.742L17.0106 18.472C17.506 18.5886 18.1963 18.5323 18.6587 17.9934L18.0895 17.505ZM20.3758 9.43609L19.6349 9.55247C19.6332 9.54192 19.6367 9.54308 19.6305 9.56164C19.6236 9.58215 19.6074 9.61522 19.5758 9.65458L20.1603 10.1244L20.7449 10.5943C20.9886 10.2911 21.1983 9.83924 21.1167 9.3197L20.3758 9.43609ZM1.05761 14.2921L1.76581 14.0452C1.77112 14.0605 1.76239 14.0619 1.77425 14.0315C1.78835 13.9954 1.82355 13.9414 1.88416 13.8915L1.4072 13.3127L0.930241 12.7339C0.49512 13.0924 0.0840976 13.7779 0.349404 14.539L1.05761 14.2921ZM17.1833 4.25733L17.3555 4.98729C17.4223 4.97154 17.4762 4.97415 17.5074 4.98142C17.5342 4.98767 17.5305 4.99312 17.5214 4.98253L18.0906 4.49416L18.6598 4.00578C18.1973 3.46669 17.5067 3.41046 17.0111 3.52736L17.1833 4.25733ZM2.90858 4.49421L3.47782 4.98253C3.46872 4.99314 3.46501 4.9877 3.49183 4.98145C3.52303 4.97418 3.57692 4.97157 3.64371 4.98733L3.81595 4.25738L3.98819 3.52742C3.49261 3.41048 2.8019 3.46667 2.33934 4.00588L2.90858 4.49421ZM19.882 13.4606L19.228 13.8277C19.2527 13.8718 19.2632 13.9071 19.2666 13.9284C19.2696 13.9477 19.266 13.9481 19.2694 13.9379L19.9806 14.176L20.6918 14.4141C20.8591 13.9145 20.7267 13.4333 20.536 13.0935L19.882 13.4606ZM12.9632 1.30557L12.7791 2.03261C12.7652 2.0291 12.7683 2.02318 12.7859 2.04453C12.8063 2.0694 12.8327 2.11685 12.8482 2.18414L13.579 2.01539L14.3098 1.84665C14.1951 1.35019 13.8382 0.753515 13.1473 0.578526L12.9632 1.30557Z"
                  fill="black"
                />
              </svg>
            </div>
            <div>
              <svg
                width="20"
                height="26"
                viewBox="0 0 20 26"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10 1.35648L10 0.606476H10V1.35648ZM19 16.1739H19.75V16.1738L19 16.1739ZM15.8574 19.8526L15.9604 20.5955L15.9605 20.5955L15.8574 19.8526ZM10 20.3565V21.1065H10L10 20.3565ZM4.14258 19.8526L4.03953 20.5955L4.03957 20.5955L4.14258 19.8526ZM1 16.1739L0.25 16.1738V16.1739H1ZM10 1.35648L9.99999 2.10648C13.4517 2.10654 16.25 4.90479 16.25 8.35648H17H17.75C17.75 4.07633 14.2801 0.606555 10 0.606476L10 1.35648ZM17 8.35648H16.25V11.0297H17H17.75V8.35648H17ZM18.3184 13.996L17.7027 14.4243C18.0477 14.9204 18.2499 15.5225 18.25 16.1739L19 16.1739L19.75 16.1738C19.7499 15.2065 19.4484 14.3072 18.9342 13.5678L18.3184 13.996ZM19 16.1739H18.25C18.25 17.6605 17.1918 18.9102 15.7543 19.1097L15.8574 19.8526L15.9605 20.5955C18.1744 20.2883 19.75 18.3737 19.75 16.1739H19ZM15.8574 19.8526L15.7544 19.1097C13.9475 19.3602 11.724 19.6065 10 19.6065L10 20.3565L10 21.1065C11.8326 21.1065 14.1411 20.8477 15.9604 20.5955L15.8574 19.8526ZM10 20.3565V19.6065C8.27601 19.6065 6.05254 19.3602 4.24559 19.1097L4.14258 19.8526L4.03957 20.5955C5.85897 20.8477 8.16741 21.1065 10 21.1065V20.3565ZM4.14258 19.8526L4.24563 19.1097C2.80812 18.9103 1.75 17.6606 1.75 16.1739H1H0.25C0.25 18.3737 1.82553 20.2883 4.03953 20.5955L4.14258 19.8526ZM1 16.1739L1.75 16.1739C1.75006 15.5225 1.95224 14.9204 2.29726 14.4243L1.68152 13.9961L1.06578 13.5678C0.551587 14.3072 0.250094 15.2065 0.25 16.1738L1 16.1739ZM3 11.0296H3.75V8.35648H3H2.25V11.0296H3ZM3 8.35648H3.75C3.75 4.90473 6.54825 2.10648 10 2.10648V1.35648V0.606476C5.71982 0.606476 2.25 4.0763 2.25 8.35648H3ZM1.68152 13.9961L2.29726 14.4243C2.88535 13.5786 3.75 12.4117 3.75 11.0296H3H2.25C2.25 11.8484 1.73429 12.6066 1.06578 13.5678L1.68152 13.9961ZM17 11.0297H16.25C16.25 12.4117 17.1146 13.5786 17.7027 14.4243L18.3184 13.996L18.9342 13.5678C18.2657 12.6066 17.75 11.8485 17.75 11.0297H17Z"
                  fill="black"
                />
                <path
                  d="M12.5 23.0154C11.9625 23.8237 11.0435 24.3565 10 24.3565C8.95655 24.3565 8.0375 23.8237 7.50005 23.0154"
                  stroke="black"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                />
              </svg>
            </div>
            <div>
              <svg
                width="20"
                height="22"
                viewBox="0 0 20 22"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M3.52 1.64L1.96 3.72C1.65102 4.13198 1.49652 4.33797 1.50011 4.51039C1.50323 4.66044 1.57358 4.80115 1.69175 4.89368C1.82754 5 2.08503 5 2.6 5H17.4C17.915 5 18.1725 5 18.3083 4.89368C18.4264 4.80115 18.4968 4.66044 18.4999 4.51039C18.5035 4.33797 18.349 4.13198 18.04 3.72L16.48 1.64M3.52 1.64C3.696 1.40533 3.784 1.288 3.89552 1.20338C3.9943 1.12842 4.10616 1.0725 4.22539 1.03845C4.36 1 4.50667 1 4.8 1H15.2C15.4933 1 15.64 1 15.7746 1.03845C15.8938 1.0725 16.0057 1.12842 16.1045 1.20338C16.216 1.288 16.304 1.40533 16.48 1.64M3.52 1.64L1.64 4.14666C1.40254 4.46328 1.28381 4.62159 1.1995 4.79592C1.12469 4.95062 1.07012 5.11431 1.03715 5.28296C1 5.47301 1 5.6709 1 6.06666V17.8C1 18.9201 1 19.4802 1.21799 19.908C1.40973 20.2843 1.71569 20.5903 2.09202 20.782C2.51984 21 3.07989 21 4.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V6.06667C19 5.6709 19 5.47301 18.9628 5.28296C18.9299 5.11431 18.8753 4.95062 18.8005 4.79592C18.7162 4.62159 18.5975 4.46328 18.36 4.14667L16.48 1.64M14 9C14 10.0609 13.5786 11.0783 12.8284 11.8284C12.0783 12.5786 11.0609 13 10 13C8.9391 13 7.92172 12.5786 7.17157 11.8284C6.42143 11.0783 6 10.0609 6 9"
                  stroke="black"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </svg>
            </div>
          </div>
        </div>
        <div className="border h-full border-[#E6E6ED] mx-4"></div>
        <div className="flex items-center gap-3">
          <Image
            src={user?.imageUrl ?? "/default-user.png"}
            width={40}
            height={40}
            alt="Merchant Image"
            className="rounded-full"
          />
          <div className="flex flex-col">
            <span className="text-black">{user?.fullName}</span>
            <span className="text-[#555555] text-sm">Merchant</span>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Header;
